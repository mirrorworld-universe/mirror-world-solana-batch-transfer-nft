{"version":3,"file":"findTokenByAddress.mjs","sources":["../../../../src/plugins/tokenModule/findTokenByAddress.ts"],"sourcesContent":["import { Metaplex } from '@/Metaplex';\nimport { Operation, OperationHandler, useOperation } from '@/types';\nimport type { Commitment, PublicKey } from '@solana/web3.js';\nimport { toTokenAccount } from './accounts';\nimport { Token, toToken } from './Token';\nimport type { TokenClient } from './TokenClient';\n\n// -----------------\n// Clients\n// -----------------\n\n/** @internal */\nexport function _findTokenByAddressClient(\n  this: TokenClient,\n  address: PublicKey,\n  options?: Omit<FindTokenByAddressInput, 'address'>\n) {\n  return this.metaplex\n    .operations()\n    .getTask(findTokenByAddressOperation({ address, ...options }));\n}\n\n// -----------------\n// Operation\n// -----------------\n\nconst Key = 'FindTokenByAddressOperation' as const;\nexport const findTokenByAddressOperation =\n  useOperation<FindTokenByAddressOperation>(Key);\nexport type FindTokenByAddressOperation = Operation<\n  typeof Key,\n  FindTokenByAddressInput,\n  Token\n>;\n\nexport type FindTokenByAddressInput = {\n  address: PublicKey;\n  commitment?: Commitment;\n};\n\n// -----------------\n// Handler\n// -----------------\n\nexport const findTokenByAddressOperationHandler: OperationHandler<FindTokenByAddressOperation> =\n  {\n    handle: async (\n      operation: FindTokenByAddressOperation,\n      metaplex: Metaplex\n    ): Promise<Token> => {\n      const { address, commitment } = operation.input;\n\n      const account = toTokenAccount(\n        await metaplex.rpc().getAccount(address, commitment)\n      );\n\n      return toToken(account);\n    },\n  };\n"],"names":["_findTokenByAddressClient","address","options","metaplex","operations","getTask","findTokenByAddressOperation","Key","useOperation","findTokenByAddressOperationHandler","handle","operation","commitment","input","account","toTokenAccount","rpc","getAccount","toToken"],"mappings":";;;;AAOA;AACA;AACA;;AAEA;AACO,SAASA,yBAAT,CAELC,OAFK,EAGLC,OAHK,EAIL;EACA,OAAO,IAAA,CAAKC,QAAL,CACJC,UADI,GAEJC,OAFI,CAEIC,2BAA2B,CAAC;IAAEL,OAAF;IAAW,GAAGC,OAAAA;AAAd,GAAD,CAF/B,CAAP,CAAA;AAGD;AAGD;AACA;;AAEA,MAAMK,GAAG,GAAG,6BAAZ,CAAA;MACaD,2BAA2B,GACtCE,YAAY,CAA8BD,GAA9B,EADP;AAaP;AACA;AACA;AAEO,MAAME,kCAAiF,GAC5F;AACEC,EAAAA,MAAM,EAAE,OACNC,SADM,EAENR,QAFM,KAGa;IACnB,MAAM;MAAEF,OAAF;AAAWW,MAAAA,UAAAA;KAAeD,GAAAA,SAAS,CAACE,KAA1C,CAAA;AAEA,IAAA,MAAMC,OAAO,GAAGC,cAAc,CAC5B,MAAMZ,QAAQ,CAACa,GAAT,EAAA,CAAeC,UAAf,CAA0BhB,OAA1B,EAAmCW,UAAnC,CADsB,CAA9B,CAAA;IAIA,OAAOM,OAAO,CAACJ,OAAD,CAAd,CAAA;AACD,GAAA;AAZH;;;;"}